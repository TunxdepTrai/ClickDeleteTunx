local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")

local function isNumber(str)
    return tonumber(str) ~= nil or str == 'inf'
end

getgenv().HitboxSize = 15
getgenv().HitboxTransparency = 0.9
getgenv().HitboxStatus = false
getgenv().TeamCheck = false
getgenv().Walkspeed = Players.LocalPlayer.Character.Humanoid.WalkSpeed
getgenv().Jumppower = Players.LocalPlayer.Character.Humanoid.JumpPower
getgenv().TPSpeed = 3
getgenv().TPWalk = false

--// UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Vcsk/UI-Library/main/Source/MyUILib(Unamed).lua"))()
local Window = Library:Create("Hitbox Expander")

local ToggleGui = Instance.new("ScreenGui")
local Toggle = Instance.new("TextButton")

ToggleGui.Name = "ToggleGui_HE"
ToggleGui.Parent = StarterGui -- Sử dụng StarterGui thay vì CoreGui

Toggle.Name = "Toggle"
Toggle.Parent = ToggleGui
Toggle.BackgroundColor3 = Color3.fromRGB(24, 24, 24)
Toggle.BackgroundTransparency = 0.66
Toggle.Position = UDim2.new(0, 0, 0.45, 0)
Toggle.Size = UDim2.new(0.065, 0, 0.089, 0)
Toggle.Font = Enum.Font.SourceSans
Toggle.Text = "Bật/Tắt"
Toggle.TextScaled = true
Toggle.TextColor3 = Color3.fromRGB(255, 0, 0)
Toggle.TextXAlignment = Enum.TextXAlignment.Left
Toggle.Draggable = true

Toggle.MouseButton1Click:Connect(function()
    Library:ToggleUI()
end)

local HomeTab = Window:Tab("Home", "rbxassetid://10888331510")
local PlayerTab = Window:Tab("Players", "rbxassetid://12296135476")
local VisualTab = Window:Tab("Visuals", "rbxassetid://12308581351")

HomeTab:InfoLabel("Chỉ hoạt động trên một số trò chơi!")
HomeTab:Section("Settings")

HomeTab:TextBox("Hitbox Size", function(value)
    getgenv().HitboxSize = tonumber(value) or 15
end)

HomeTab:TextBox("Hitbox Transparency", function(value)
    getgenv().HitboxTransparency = tonumber(value) or 0.9
end)

HomeTab:Toggle("Status: ", function(state)
    getgenv().HitboxStatus = state
    game:GetService('RunService').RenderStepped:Connect(function()
        if HitboxStatus then
            for _, v in pairs(Players:GetPlayers()) do
                if v.Name ~= Players.LocalPlayer.Name then
                    pcall(function()
                        local hrp = v.Character and v.Character:FindFirstChild("HumanoidRootPart")
                        if hrp then
                            hrp.Size = Vector3.new(HitboxSize, HitboxSize, HitboxSize)
                            hrp.Transparency = HitboxTransparency
                            hrp.BrickColor = BrickColor.new("Really black")
                            hrp.Material = "Neon"
                            hrp.CanCollide = false
                        end
                    end)
                end
            end
        end
    end)
end)

HomeTab:Keybind("Toggle UI", Enum.KeyCode.F, function()
    Library:ToggleUI()
end)

PlayerTab:TextBox("WalkSpeed", function(value)
    getgenv().Walkspeed = tonumber(value) or 16
    pcall(function()
        Players.LocalPlayer.Character.Humanoid.WalkSpeed = Walkspeed
    end)
end)

PlayerTab:TextBox("JumpPower", function(value)
    getgenv().Jumppower = tonumber(value) or 50
    pcall(function()
        Players.LocalPlayer.Character.Humanoid.JumpPower = Jumppower
    end)
end)

VisualTab:Toggle("Character Highlight", function(state)
    getgenv().enabled = state
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Vcsk/RobloxScripts/main/Highlight-ESP.lua"))()
end)

if game.PlaceId == 3082002798 then
    local GamesTab = Window:Tab("Games", "rbxassetid://15426471035")
    GamesTab:InfoLabel("Game: " .. game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name)
    GamesTab:Button("No Cooldown", function()
        for _, v in pairs(game:GetService('ReplicatedStorage').Shared_Modules.Tools:GetDescendants()) do
            if v:IsA('ModuleScript') then
                local Module = require(v)
                Module.DEBOUNCE = 0
            end
        end
    end)
end
